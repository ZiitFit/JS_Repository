<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- <h1>스트라이크 1볼</h1>
    <form action="" class="formBox">
        <input type="text" class="input">
        <button>버튼</button>
    </form> -->

    <script>
        // var num1 = [1,2,3,4,5,6,7,8,9];
        // var num2 = [];

        // for (var i = 0; i < 4; i +=1){
        //     var select = num1.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
        //     num2.push(select);
        // }
        // console.log(num2)
        // push: 마지막에 추가
        // pop: 마지막 것 뽑기
        // unshift: 처음에 추가
        // shift: 처음것 뽑기
        // splice (위치, 개수) 하면 위치로부터 개수만큼 배열에서 뽑음

        // var body = document.body;
        // var result = document.createElement('h1');
        // body.append(result);
        // var form = document.createElement('form');
        // body.append(form);
        // var input = document.createElement('input');
        // form.append(input);
        // input.type = 'text';
        // input.maxLength = 4;
        // var button = document.createElement('button');
        // button.textContent = '입력!';
        // form.append(button);

        // var wrong = 0;
        // form.addEventListener('submit', function(e){
        //     e.preventDefault();
        //     var answer = input.value;
        //     if (answer == num2.join('')) { //답이맞으면
        //         result.textContent = '홈런';
        //         input.value = '';
        //         input.focus();
        //         num1 = [1,2,3,4,5,6,7,8,9];
        //         num2 = [];

        //         for (var i = 0; i < 4; i +=1){
        //             var select = num1.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
        //             num2.push(select);
        //         }
        //         wrong = 0;
        //     } else { // 답이 틀리면
        //         var resultnum = answer.split('');
        //         var strike = 0;
        //         var ball = 0;
        //         wrong += 1;
        //         if (wrong > 4 ) { // 10번 넘게 틀린 경우
        //             result.textContent = '실패! 답은' + num2.join(',') + '였습니다!';
        //             input.value = '';
        //             input.focus();
        //             num1 = [1,2,3,4,5,6,7,8,9];
        //             num2 = [];

        //             for (var i = 0; i < 4; i +=1){
        //                 var select = num1.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
        //                 num2.push(select);
        //             }
        //             wrong = 0;
        //         } else { // 10번 미만으로 틀릴경우
        //             console.log('답이 틀리면', num2);
        //             for (var i = 0; i < 4; i += 1){
        //                 if (Number(resultnum[i]) === num2[i]) { // 같은 자리인지 확인
        //                     console.log('같은 자리?')
        //                     strike += 1;
        //                 } else if(num2.indexOf(Number(resultnum[i])) > -1 ) { // 같은자리는 아니지만 , 숫자 겹치는지 확인
        //                     ball += 1;
        //                 }
        //             }
        //             result.textContent = strike + '스트라이크' + ball + '볼';
        //             input.value = '';
        //             input.focus();
        //         }
        //     }
        // })


        // -----------------------------------------------------------------------------
        var number = [1,2,3,4,5,6,7,8,9];
        var numberArr = [];

        for ( var i = 0; i < 4; i += 1) {
            var select = number.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
            numberArr.push(select);
        }
        console.log(numberArr);

        var body = document.body;
        var result = document.createElement('h1');
        body.append(result);
        var form = document.createElement('form');
        body.append(form);
        var input = document.createElement('input');
        form.append(input);
        input.type = 'text';
        input.maxLength = 4;
        var button = document.createElement('button');
        button.textContent = '입력!';
        form.append(button);

        var wrong = 0;
        form.addEventListener('submit', function(e){
            e.preventDefault();
            var answer = input.value;
            if (answer === numberArr.join('')) {
                result.textContent = '홈런!'
                input.value = '';
                input.focus();
                number = [1,2,3,4,5,6,7,8,9];
                numberArr = [];

                for ( var i = 0; i < 4; i += 1) {
                    var select = number.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
                    numberArr.push(select);
                }
                console.log(numberArr);
                wrong = 0;
            } else {
                var resultNum = answer.split('');
                console.log(resultNum)
                var strike = 0;
                var ball = 0;
                wrong += 1;
                if (wrong > 4) { //4번 이상 틀린 경우
                    result.textContent = '땡! 답은 ' + numberArr.join(',') + ' 였습니다!'
                    input.value = '';
                    input.focus();
                    number = [1,2,3,4,5,6,7,8,9];
                    numberArr = [];

                    for ( var i = 0; i < 4; i += 1) {
                        var select = number.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
                        numberArr.push(select);
                    }
                    console.log(numberArr);
                    wrong = 0;
                } else { // 4번 미만으로 틀린 경우
                    for (var i = 0; i < 4; i += 1) {
                        if (Number(resultNum[i]) === numberArr[i]) { //같은자리인지 확인
                            console.log('strike');
                            strike += 1;
                        } else if(numberArr.indexOf(Number(resultNum[i])) > -1) { // 같은자리는 아니지만, 숫자 겹치는지 확인
                            console.log('ball');
                            ball += 1;
                        }
                    }
                    result.textContent = 'strike: ' + strike + ' ball: ' + ball + ' 입니다'
                    input.value = '';
                    input.focus();
                }


            }
        })

    </script>
</body>
</html>

